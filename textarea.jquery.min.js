(function(a){a.fn.textarea=function(b){var c={maxlength:10,visibleCount:true};b=a.extend(c,b);var d=function(g){var e=g.attr("value").length,f=parseInt(g.attr("maxlength"),10)>0?g.attr("maxlength"):b.maxlength;if(b.visibleCount){g.after("<div class='maxValue'>"+(f-e)+"</div>")}if(!browserSupport(g)){g.keypress(function(m){var k=m.charCode?m.charCode:m.keyCode,j=(k==8||k==64||k==9||k==37||k==38||k==39||k==40||k==46),i=a(this),l=i.attr("value"),n=l.length,h=i.next();if(n>=f){return j||(!m.metaKey?m.ctrlKey:m.metaKey)}}).bind("paste",function(){var h=a(this);setTimeout(function(){var i=h.attr("value");valueSize=i.length;if(valueSize>f){h.attr("value",i.substr(0,f))}},10)})}if(b.visibleCount){g.keyup(function(k){var i=a(this),j=i.attr("value"),l=j.length,h=i.next();h.html((f-l))})}};browserSupport=function(f){var e=document.createElement("textarea");return("maxLength" in e)&&(f.attr("maxlength")>0)};this.each(function(){d(a(this))})};a("textarea[maxlength]").each(function(){a(this).textarea()})})(jQuery);